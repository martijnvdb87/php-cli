#!/usr/bin/env php
<?php

if(php_sapi_name() !== 'cli') exit;

require __DIR__.'/vendor/autoload.php';

use Martijnvdb\PhpCli\Cli;
use Martijnvdb\PhpCli\Command;
use Martijnvdb\PhpCli\Input;

$cli = new Cli('First CLI App', '');

$cli->addCommand(
    Command::default()
        ->addOption('help', 'The name that should be printed.', 'h')
        ->addOption('version', 'The version of this application.', 'v')
        ->addAction(function($input, $output) {
            $output->line('Lorem ipsum [s]dolor sit[/s] amet, consectetur adipiscing elit.');
        })
)
->addCommand(
    Command::new('test')
        ->addOption('name', 'The name that should be printed.', 'n')
        ->addAction(function($input, $output) {
            $output->line($input->name);
            $output->line($input->name);
        })
)
->addCommand(
    Command::new('test:input')
        ->addOption('name', 'The name that should be printed.', 'n')
        ->addAction(function($input, $output, $command) {
            $name = $input->name ? $input->name : Input::text('[yellow]What is your name?[/yellow]')->inputStyling('red')->required()->run();
            $number = Input::number('Number?')->required()->run();

            $output->line($name);
        })
);

$cli->run();