#!/usr/bin/env php
<?php

if(php_sapi_name() !== 'cli') exit;

require __DIR__.'/vendor/autoload.php';

use Martijnvdb\PhpCli\Cli;
use Martijnvdb\PhpCli\Command;
use Martijnvdb\PhpCli\Input;

$cli = new Cli('First CLI App', '');

$cli->addCommand(
    Command::default()
        ->addOption('help', 'The name that should be printed.', 'h')
        ->addAction(function($input, $output) {
            $output->currentLine("HELP", 'blue');
        })
)
->addCommand(
    Command::new('test')
        ->addOption('name', 'The name that should be printed.', 'n')
        ->addAction(function($input, $output) {
            $output->currentLine($input->name, 'red');
            $output->newLine($input->name, 'blue');
        })
)
->addCommand(
    Command::new('test:input')
        ->addOption('name', 'The name that should be printed.', 'n')
        ->addAction(function($input, $output, $command) {
            $name = $input->name ? $input->name : Input::text('What is your name?')->setLabelOption(['yellow'])->required()->run();
            $number = Input::number('Number?')->required()->run();

            $output->currentLine($name);
        })
);

$cli->run();